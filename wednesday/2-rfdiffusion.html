<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2. RFdiffusion: Advanced Design – ML Protein Design Bootcamp 2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-b3b235ae6ba71d6e5c2a90c00144237d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<!-- Shared Mol* component include for target pages -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pdbe-molstar@latest/build/pdbe-molstar-component.js"></script>
<style>
  .molstar-container {
    width: 100%;
    height: 500px;
    position: relative;
    margin-bottom: 20px;
    border: 1px solid #eee;
    border-radius: 8px;
    overflow: hidden;
  }
</style>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">ML Protein Design Bootcamp 2025</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../monday/index.html"> 
<span class="menu-text">Monday</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../tuesday/index.html"> 
<span class="menu-text">Tuesday</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../wednesday/index.html"> 
<span class="menu-text">Wednesday</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../thursday/index.html"> 
<span class="menu-text">Thursday</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../capstone/index.html"> 
<span class="menu-text">Capstone</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/RosettaMLBootCamp2025/RosettaMLBootCamp2025.github.io/issues/new"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">Report Issue</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#in-class-activity" id="toc-in-class-activity" class="nav-link active" data-scroll-target="#in-class-activity">In-Class Activity</a></li>
  <li><a href="#project-time" id="toc-project-time" class="nav-link" data-scroll-target="#project-time">Project Time</a>
  <ul class="collapse">
  <li><a href="#milestone-1-target-preparation-initial-exploration" id="toc-milestone-1-target-preparation-initial-exploration" class="nav-link" data-scroll-target="#milestone-1-target-preparation-initial-exploration">Milestone 1: Target Preparation &amp; Initial Exploration</a></li>
  <li><a href="#milestone-2-unconditional-binder-generation" id="toc-milestone-2-unconditional-binder-generation" class="nav-link" data-scroll-target="#milestone-2-unconditional-binder-generation">Milestone 2: Unconditional Binder Generation</a></li>
  <li><a href="#milestone-3-hotspot-guided-binder-design" id="toc-milestone-3-hotspot-guided-binder-design" class="nav-link" data-scroll-target="#milestone-3-hotspot-guided-binder-design">Milestone 3: Hotspot-Guided Binder Design</a></li>
  <li><a href="#milestone-4-potential-optimization" id="toc-milestone-4-potential-optimization" class="nav-link" data-scroll-target="#milestone-4-potential-optimization">Milestone 4: Potential Optimization</a></li>
  <li><a href="#milestone-5-analysis-selection" id="toc-milestone-5-analysis-selection" class="nav-link" data-scroll-target="#milestone-5-analysis-selection">Milestone 5: Analysis &amp; Selection</a></li>
  </ul></li>
  <li><a href="#troubleshooting-guide" id="toc-troubleshooting-guide" class="nav-link" data-scroll-target="#troubleshooting-guide">Troubleshooting Guide</a>
  <ul class="collapse">
  <li><a href="#common-issues-solutions" id="toc-common-issues-solutions" class="nav-link" data-scroll-target="#common-issues-solutions">Common Issues &amp; Solutions</a></li>
  <li><a href="#tips-for-success" id="toc-tips-for-success" class="nav-link" data-scroll-target="#tips-for-success">Tips for Success</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2. RFdiffusion: Advanced Design</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="in-class-activity" class="level2">
<h2 class="anchored" data-anchor-id="in-class-activity">In-Class Activity</h2>
<ol type="1">
<li><strong>Setup for the activity.</strong>
<ol type="1">
<li>Go to the RFdiffusion installation and make a new directory for the activity: <code>mkdir activity</code>.</li>
</ol></li>
<li><strong>Generate unconditional monomers.</strong>
<ol type="1">
<li>Make new folder for this example: <code>cd activity; mkdir 1_uncond; cd 1_uncond</code></li>
<li>Copy <code>design_unconditional.sh</code> here: <code>cp ../../examples/design_unconditional.sh .</code></li>
<li>Edit the design script by using 1) <code>'contigmap.contigs=[75-150]'</code>, 2) <code>inference.num_designs=5</code> , 3) <code>../../scripts/run_inference.py</code>.</li>
<li>Run the script: <code>bash design_unconditional.sh</code>
<ul>
<li>What did the script create?</li>
<li>Look at the structures. What are kinds of topologies did you get?</li>
</ul></li>
</ol></li>
<li><strong>Generate monomers that scaffold a motif.</strong>
<ol type="1">
<li>Make new folder for this example: <code>cd activity; mkdir 2_motifs; cd 2_motifs</code></li>
<li>Copy <code>design_motifscaffolding.sh</code> here: <code>cp ../../examples/design_motifscaffolding.sh .</code></li>
<li>For this example, we’ll be scaffolding a site from RSV-F protein. Let’s copy that .pdb here: <code>cp ../../examples/input_pdbs/5TPN.pdb .</code></li>
<li>Edit the design script by using 1) <code>inference.input_pdb=5TPN.pdb</code>, 2) <code>'contigmap.contigs=[10-40/A163-181/10-40]'</code>, 3) <code>inference.num_designs=5</code> , 4) <code>../../scripts/run_inference.py</code>.
<ul>
<li>The backbone we’re generating will have 10-40 residues (randomly sampled), the the motif residues 163-181 (inclusive) on chain A of the input, then 10-40 residues (randomly sampled).</li>
</ul></li>
<li>Run the script: <code>bash design_motifscaffolding.sh</code>
<ul>
<li>Look at the structures. How well is the motif scaffolded?</li>
</ul></li>
</ol></li>
<li><strong>Generate partially diffused structures.</strong>
<ol type="1">
<li>Make new folder for this example: <code>cd activity; mkdir 3_partial; cd 3_partial</code></li>
<li>Copy <code>design_partialdiffusion.sh</code> here: <code>cp ../../examples/design_partialdiffusion.sh .</code></li>
<li>For this example, we’ll be partially noising and denoising a 79 residue protein 2KL8. Let’s copy that .pdb here: <code>cp ../../examples/input_pdbs/2KL8.pdb .</code></li>
<li>Edit the design script by using 1) <code>inference.input_pdb=2KL8.pdb</code>, 2) <code>'contigmap.contigs=[79-79]’</code>, and 3) <code>inference.num_designs=5</code>.
<ul>
<li>Here we’re generating diversity around a particular fold by noising and denoising 10 steps (20% of the full trajectory). We’re adding noise to the entire structure (all 79 residues), but part of the structure can also be held fixed.</li>
</ul></li>
<li>Run the script: <code>bash design_partialdiffusion.sh</code>
<ul>
<li>Look at the structures. How similar are the outputs to the original structure?</li>
</ul></li>
</ol></li>
<li><strong>Generate binders with hotspots.</strong>
<ol type="1">
<li>Make new folder for this example: <code>cd activity; mkdir 4_hotspot; cd 4_hotspot</code></li>
<li>Copy <code>design_ppi.sh</code> here: <code>cp ../../examples/design_ppi.sh .</code></li>
<li>For this example, we’ll be designing binders to insulin receptor. Let’s copy that .pdb here: <code>cp ../../examples/input_pdbs/insulin_target.pdb .</code></li>
<li>Edit the design script by using 1) <code>inference.input_pdb=insulin_target.pdb</code>, 2) <code>'contigmap.contigs=[A1-150/0 70-100]’</code>, 3) ’<code>ppi.hotspot_res=[A59,A83,A91]’</code>, 4) <code>inference.num_designs=5</code>, 5) <code>denoiser.noise_scale_ca=0</code>, and 6) <code>denoiser.noise_scale_frame=0</code>.
<ul>
<li>Here, we’re designing binders to insulin receptor. The contig describes the protein we want: residues 1-150 of the A chain of the receptor, a chainbreak (we don’t want to fuse the binder and target!), a 70-100 residue binder to be diffused. We also tell diffusion to target three specific residues, specifically residues 59, 83 and 91 of chain A. Finally, we reduce the noise added during inference to 0 to improve the quality of the designs.</li>
</ul></li>
<li>Run the script: <code>bash design_ppi.sh</code>
<ul>
<li>Look at the structures. What are the topologies of your binders?</li>
</ul></li>
</ol></li>
<li><strong>Generate fold-conditioned structures.</strong>
<ol type="1">
<li>Make new folder for this example: <code>cd activity; mkdir 5_fold_cond; cd 5_fold_cond</code></li>
<li>Copy <code>design_timbarrel.sh</code> here: <code>cp ../../examples/design_timbarrel.sh .</code></li>
<li>For this example, we’ll be diffusing a TIM barrel by providing course-grained specification of the fold. Let’s copy that fold information here: <code>cp -r ../../examples/tim_barrel_scaffold/ .</code>
<ul>
<li>What do the files in this folder represent?</li>
</ul></li>
<li>Edit the design script by using <code>inference.num_designs=5</code>.
<ul>
<li>Here, we’re making a TIM barrel by providing course-grained specification of the fold. We specify the output path. We tell RFdiffusion that we want to do scaffoldguided design, and that we are not making a binder to a target (just a monomer). We provide a path to a directory of TIM barrel scaffolds, generated with the helper script <code>helper_scripts/make_secstruc_adj.py</code>. We generate 5 designs, with a reduced noise scale during inference of 0.5. We also sample additional length to increase diversity of the outputs by masking the loops and inserting 0-5 residues into each loop. We also add 0-5 residues to the N and the C-terminus. These allow use to sample additional diversity in our designs.</li>
<li>You may need to edit <code>rfdiffusion/inference/model_runners.py</code> like 751 to <code>self.blockadjacency = iu.BlockAdjacency(conf, conf.inference.num_designs)</code></li>
</ul></li>
<li>Run the script: <code>bash design_timbarrel.sh</code>
<ul>
<li>Look at the structures. How do these generations compare to the TIM barrel structure used for conditioning (<a href="https://www.rcsb.org/structure/6WVS">6WVS</a>)?</li>
</ul></li>
</ol></li>
<li><strong>Generate oligomers of various symmetries.</strong>
<ol type="1">
<li>Make new folder for this example: <code>cd activity; mkdir 6_symmetry; cd 6_symmetry</code></li>
<li>Copy <code>design_cyclic_oligos.sh</code>, <code>design_dihedral_oligos.sh</code>, and <code>design_tetrahedral_oligos.sh</code> here: <code>cp ../../examples/design_cyclic_oligos.sh .</code>, <code>cp ../../examples/design_dihedral_oligos.sh .</code>, and <code>cp ../../examples/design_tetrahedral_oligos.sh .</code></li>
<li><strong>Generate cyclic oligomers:</strong>
<ol type="1">
<li>Edit the <code>design_cyclic_oligos.sh</code> script by changing 1) <code>inference.symmetry="C4”</code>, 2) <code>inference.num_designs=5</code>, 3) <code>inference.output_prefix="example_outputs/C4_oligo”</code>, and 4) <code>'contigmap.contigs=[200-200]’</code>.
<ul>
<li>In this example, we generate 5 designs of C4 symmetric oligomers. For symmetrical diffusion, we need the symmetry config. We also apply an external potential to promote contacts both within (with a relative weight of 1) and between chains (relative weight 0.1). We specify that we want to apply these potentials to all chains, with a guide scale of 2.0 (a sensible starting point). We decay this potential with quadratic form, so that it is applied more strongly initially. We specify a total length of 200 aa, so each chain is 50 residues long.</li>
</ul></li>
<li>Run the script: <code>bash design_cyclic_oligos.sh</code>
<ul>
<li>Do the structures have the desired symmetry?</li>
<li>What topologies are found in the individual subunits?</li>
</ul></li>
</ol></li>
<li><strong>Generate dihedral oligomers:</strong>
<ol type="1">
<li>Edit the <code>design_dihedral_oligos.sh</code> script by changing <code>inference.num_designs=2</code>.
<ul>
<li>In this example, we generate 2 D2 symmetric oligomers using the symmetry config. We also apply an external potential to promote contacts both within (with a relative weight of 1) and between chains (relative weight 0.1). We specify that we want to apply these potentials to all chains, with a guide scale of 2.0 (a sensible starting point). We decay this potential with quadratic form, so that it is applied more strongly initially. We specify a total length of 320 aa, so each chain is 80 residues long.</li>
</ul></li>
<li>Run the script: <code>bash design_dihedral_oligos.sh</code>
<ul>
<li>Do the structures have the desired symmetry?</li>
<li>What topologies are found in the individual subunits?</li>
</ul></li>
</ol></li>
<li><strong>Generate tetrahedral oligomers:</strong>
<ol type="1">
<li>Edit the <code>design_tetrahedral_oligos.sh</code> script by changing 1) <code>inference.num_designs=2</code>, 2) <code>'contigmap.contigs=[720-720]’</code>.
<ul>
<li>In this example, we generate tetrahedral symmetric oligomers. We use the symmetry config, and specify we want a tetrahedral oligomer, with 2 designs generated. We specify the output prefix, and also the potential we want to apply. This external potential promotes contacts both within (with a relative weight of 1) and between chains (relative weight 0.1). We specify that we want to apply these potentials to all chains, with a guide scale of 2.0 (a sensible starting point). We decay this potential with quadratic form, so that it is applied more strongly initially. We specify a total length of 720 aa, so each chain is 60 residues long</li>
</ul></li>
<li>Run the script: <code>bash design_tetrahedral_oligos.sh</code>
<ul>
<li>Do the structures have the desired symmetry?</li>
<li>What topologies are found in the individual subunits?</li>
</ul></li>
</ol></li>
</ol></li>
</ol>
</section>
<section id="project-time" class="level2">
<h2 class="anchored" data-anchor-id="project-time">Project Time</h2>
<p><strong>(Use your target protein)</strong></p>
<section id="milestone-1-target-preparation-initial-exploration" class="level3">
<h3 class="anchored" data-anchor-id="milestone-1-target-preparation-initial-exploration">Milestone 1: Target Preparation &amp; Initial Exploration</h3>
<ul>
<li>Set up your project directory structure</li>
<li>Download and inspect your assigned target PDB</li>
<li>Identify the binding surface and hotspot residues from the table below</li>
<li>Run 2-3 test designs to verify your setup is working correctly</li>
</ul>
</section>
<section id="milestone-2-unconditional-binder-generation" class="level3">
<h3 class="anchored" data-anchor-id="milestone-2-unconditional-binder-generation">Milestone 2: Unconditional Binder Generation</h3>
<ul>
<li>Generate at least 10 unconditional binders of length 70-100 towards your target protein.
<ul>
<li>Is there a particular epitope on the target that RFdiffusion prefers?</li>
<li>Is there a particular binder topology that RFdiffusion prefers?</li>
</ul></li>
</ul>
</section>
<section id="milestone-3-hotspot-guided-binder-design" class="level3">
<h3 class="anchored" data-anchor-id="milestone-3-hotspot-guided-binder-design">Milestone 3: Hotspot-Guided Binder Design</h3>
<ul>
<li>Each of the targets that were assigned were previously used in binder design experiments (<a href="https://www.nature.com/articles/s41586-023-06415-8">1</a>, <a href="https://www.biorxiv.org/content/10.1101/2024.09.30.615802">2</a>). These experiments made use of hotspots located on the target proteins. Generate at least 10 binders towards your target protein using the hotspots below.
<ul>
<li>Is there a particular binder topology that RFdiffusion prefers to generate?</li>
</ul></li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Target</th>
<th>UniProt ID</th>
<th>PDB ID</th>
<th>Hotspot Residues (chain and residue index from PDB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>PD-L1</td>
<td><a href="https://www.uniprot.org/uniprotkb/Q9NZQ7/entry">Q9NZQ7</a></td>
<td><a href="https://www.rcsb.org/structure/5O45">5O45</a></td>
<td>A56, A115, A123</td>
</tr>
<tr class="even">
<td>IL-7Rɑ</td>
<td><a href="https://www.uniprot.org/uniprotkb/P16871/entry">P16871</a></td>
<td><a href="https://www.rcsb.org/structure/3DI3">3DI3</a></td>
<td>B58, B80, B139</td>
</tr>
<tr class="odd">
<td>TrkA receptor</td>
<td><a href="https://www.uniprot.org/uniprotkb/P04629/entry">P04629</a></td>
<td><a href="https://www.rcsb.org/structure/1WWW">1WWW</a></td>
<td>X294, X296, X333</td>
</tr>
<tr class="even">
<td>IFNAR2</td>
<td><a href="https://www.uniprot.org/uniprotkb/P48551/entry">P48551</a></td>
<td><a href="https://www.rcsb.org/structure/2LAG">2LAG</a></td>
<td>B52, B82, B98</td>
</tr>
<tr class="odd">
<td>Bet v 1-A</td>
<td><a href="https://www.uniprot.org/uniprotkb/P15494/entry">P15494</a></td>
<td><a href="https://www.rcsb.org/structure/1bv1">1BV1</a></td>
<td>A24, A28, A43</td>
</tr>
</tbody>
</table>
</section>
<section id="milestone-4-potential-optimization" class="level3">
<h3 class="anchored" data-anchor-id="milestone-4-potential-optimization">Milestone 4: Potential Optimization</h3>
<ul>
<li>Potentials can be powerful ways to bias the generation process. Try at least 3 different combinations of potentials, generating 5 backbones with each. Be sure to use hotspots for these generations too!
<ul>
<li>How did the potentials change your outputs?</li>
<li>Did you find a particularly useful configuration of potentials?</li>
</ul></li>
</ul>
</section>
<section id="milestone-5-analysis-selection" class="level3">
<h3 class="anchored" data-anchor-id="milestone-5-analysis-selection">Milestone 5: Analysis &amp; Selection</h3>
<ul>
<li>Compare your unconditional vs.&nbsp;hotspot-guided vs.&nbsp;potential-optimized designs</li>
<li>Identify your top 3-5 most promising binder designs</li>
<li>Document what makes these designs stand out (binding pose, topology, contact with hotspots, etc.)</li>
</ul>
<hr>
</section>
</section>
<section id="troubleshooting-guide" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-guide">Troubleshooting Guide</h2>
<section id="common-issues-solutions" class="level3">
<h3 class="anchored" data-anchor-id="common-issues-solutions">Common Issues &amp; Solutions</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 28%">
<col style="width: 40%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Problem</th>
<th>Likely Cause</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>“CUDA out of memory”</strong></td>
<td>GPU memory exhausted</td>
<td>Reduce <code>inference.num_designs</code> to 1-2, or design smaller proteins</td>
</tr>
<tr class="even">
<td><strong>Script hangs at “Initializing model”</strong></td>
<td>Missing model weights or incorrect paths</td>
<td>Verify RFdiffusion installation and model checkpoint paths</td>
</tr>
<tr class="odd">
<td><strong>“FileNotFoundError” for input PDB</strong></td>
<td>Incorrect file path or missing file</td>
<td>Check that PDB file exists in current directory with <code>ls *.pdb</code></td>
</tr>
<tr class="even">
<td><strong>Designs look extended/unfolded</strong></td>
<td>Insufficient denoising or inappropriate settings</td>
<td>Check <code>inference.num_steps</code> (should be ~50), verify contig syntax</td>
</tr>
<tr class="odd">
<td><strong>Binders don’t contact target</strong></td>
<td>Incorrect contig specification or chainbreak</td>
<td>Verify <code>/0</code> chainbreak in contigs, check residue numbering in target PDB</td>
</tr>
<tr class="even">
<td><strong>Binders don’t contact hotspots</strong></td>
<td>Hotspot residues too far apart or incorrect chain ID</td>
<td>Verify chain IDs and residue numbers match your PDB file exactly</td>
</tr>
<tr class="odd">
<td><strong>“ImportError” or module not found</strong></td>
<td>Conda environment not activated</td>
<td>Activate RFdiffusion environment: <code>conda activate RFdiffusion</code> (or appropriate env name)</td>
</tr>
<tr class="even">
<td><strong>Script runs but produces no outputs</strong></td>
<td>Output directory doesn’t exist or permissions issue</td>
<td>Check that output directory exists, verify write permissions</td>
</tr>
<tr class="odd">
<td><strong>Symmetric oligomers don’t look symmetric</strong></td>
<td>Incorrect symmetry specification or potentials</td>
<td>Verify symmetry string (e.g., “C4”, “D2”, “T”), check potential settings</td>
</tr>
<tr class="even">
<td><strong>“BlockAdjacency” error in fold-conditioned</strong></td>
<td>Known bug in model_runners.py</td>
<td>Edit <code>rfdiffusion/inference/model_runners.py</code> line ~751 as noted in activity</td>
</tr>
<tr class="odd">
<td><strong>Very slow generation times</strong></td>
<td>Normal for large/complex designs</td>
<td>Tetrahedral oligomers can take 30-60 min. Consider using <code>screen</code> or <code>tmux</code></td>
</tr>
<tr class="even">
<td><strong>All designs look very similar</strong></td>
<td>Insufficient diversity sampling</td>
<td>Increase contig length ranges (e.g., <code>[60-100]</code> instead of <code>[80-80]</code>), adjust noise scales</td>
</tr>
</tbody>
</table>
</section>
<section id="tips-for-success" class="level3">
<h3 class="anchored" data-anchor-id="tips-for-success">Tips for Success</h3>
<ul>
<li><strong>Always check your PDB file first</strong>: Use PyMOL or ChimeraX to verify chain IDs and residue numbering before running</li>
<li><strong>Start small</strong>: Test with <code>num_designs=1</code> first to verify your setup works</li>
<li><strong>Save your commands</strong>: Keep a log of successful parameter combinations</li>
<li><strong>Use descriptive output names</strong>: Include key parameters in output_prefix (e.g., <code>hotspot_A59_A83_A91</code>)</li>
<li><strong>Check the logs</strong>: RFdiffusion creates log files - read them if something goes wrong</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script>
(function() {
  const STORAGE_KEY = 'bootcamp2025_progress';
  const LAST_PAGE_KEY = 'bootcamp2025_lastpage';

  // Get current page path
  const currentPath = window.location.pathname;
  const isHomePage = currentPath === '/' || currentPath.endsWith('/index.html') || currentPath === '/index.html' || currentPath.match(/^\/[^\/]*\/?$/);

  // Extract day from path
  function getDayFromPath(path) {
    const dayMap = {
      'monday': 'Monday',
      'tuesday': 'Tuesday',
      'wednesday': 'Wednesday',
      'thursday': 'Thursday',
      'capstone': 'Capstone'
    };
    const match = path.match(/\/(monday|tuesday|wednesday|thursday|capstone)\//i);
    return match ? dayMap[match[1].toLowerCase()] : null;
  }

  // Save current page as last visited (except homepage)
  if (!isHomePage) {
    const pageTitle = document.title.replace(' - ML Protein Design Bootcamp 2025', '');
    const day = getDayFromPath(currentPath);
    localStorage.setItem(LAST_PAGE_KEY, JSON.stringify({
      path: currentPath,
      title: pageTitle,
      day: day,
      timestamp: Date.now()
    }));
  }

  // Load progress data
  function getProgress() {
    const data = localStorage.getItem(STORAGE_KEY);
    return data ? JSON.parse(data) : { completed: [] };
  }

  // Save progress data
  function saveProgress(progress) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
  }

  // Update progress bar on homepage
  function updateProgressBar() {
    const progress = getProgress();
    const totalModules = document.querySelectorAll('.module-checkbox').length ||
                         parseInt(document.body.dataset.totalModules) || 8; // fallback
    const completed = progress.completed.length;
    const percent = Math.round((completed / totalModules) * 100);

    const bar = document.getElementById('progress-bar');
    const count = document.getElementById('completed-count');

    if (bar) {
      bar.style.width = percent + '%';
      bar.textContent = percent + '%';
      bar.setAttribute('aria-valuenow', percent);
    }
    if (count) {
      count.textContent = completed;
    }
  }

  // Show resume banner on homepage if there's a saved page
  function showResumeBanner() {
    const lastPage = localStorage.getItem(LAST_PAGE_KEY);
    if (lastPage && isHomePage) {
      const data = JSON.parse(lastPage);
      const banner = document.getElementById('resume-banner');
      const link = document.getElementById('resume-link');
      const title = document.getElementById('last-page-title');

      if (banner && link && title && data.path) {
        // Format title with day prefix if available
        const displayTitle = data.day ? `${data.day}: ${data.title}` : data.title;
        title.textContent = displayTitle;
        link.href = data.path;
        banner.style.display = 'block';
      }
    }
  }

  // Initialize checkboxes on module pages
  function initCheckboxes() {
    const checkboxes = document.querySelectorAll('.module-checkbox');
    const progress = getProgress();

    checkboxes.forEach(cb => {
      const id = cb.dataset.moduleId;

      // Restore state
      if (progress.completed.includes(id)) {
        cb.checked = true;
      }

      // Save on change
      cb.addEventListener('change', function() {
        const progress = getProgress();
        if (this.checked) {
          if (!progress.completed.includes(id)) {
            progress.completed.push(id);
          }
        } else {
          progress.completed = progress.completed.filter(x => x !== id);
        }
        saveProgress(progress);
        updateProgressBar();
      });
    });
  }

  // Clear all progress
  window.clearProgress = function() {
    localStorage.removeItem(STORAGE_KEY);
    localStorage.removeItem(LAST_PAGE_KEY);
    location.reload();
  };

  // Mark all checkboxes on current page as complete
  window.markAllComplete = function() {
    const checkboxes = document.querySelectorAll('.module-checkbox');
    const progress = getProgress();

    checkboxes.forEach(cb => {
      const id = cb.dataset.moduleId;
      cb.checked = true;
      if (!progress.completed.includes(id)) {
        progress.completed.push(id);
      }
    });

    saveProgress(progress);
    updateProgressBar();
  };

  // Add "Mark all as complete" button to pages with checkboxes
  function addMarkAllButton() {
    const checkboxes = document.querySelectorAll('.module-checkbox');
    if (checkboxes.length > 0 && !isHomePage) {
      // Find the title element and add button after it
      const title = document.querySelector('h1.title, .quarto-title h1');
      if (title) {
        const btn = document.createElement('button');
        btn.textContent = 'Mark all as complete';
        btn.className = 'btn btn-outline-success btn-sm mark-all-btn';
        btn.style.cssText = 'margin-top: 0.5rem; margin-bottom: 1rem;';
        btn.onclick = window.markAllComplete;
        title.insertAdjacentElement('afterend', btn);
      }
    }
  }

  // Run on page load
  document.addEventListener('DOMContentLoaded', function() {
    showResumeBanner();
    initCheckboxes();
    updateProgressBar();
    addMarkAllButton();
  });
})();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>